## 📆 2024-05-27

### 🔔 스크럼

- 학습 목표 1 : 스레드 교착상태
  <br/>

### 🚀 Today I Learned

#### | 교착상태

`교착상태`란, 자원을 소유한 태스크들 사이에서 각 태스크는 다른 태스크가 소유한 자원을 요청하여 모든 태스크가 무한정 대기하는 현상이다.

**교착상태 유발 요인**

- 자원: 자원은 교착상태의 발생지
- 자원과 스레드: 한 스레드가 동시에 여러 개의 자원을 필요로 하는 경우 존재
- 자원과 운영체제: 운영체제는 한 번에 하나씩 자원을 할당
- 자원 비선점: 할당된 자원을 스레드가 자발적으로 내놓기 전 선점할 수 없음

<img src="" />
스레드들이 교착상태에 있게 되면, 자원 할당 그래프에 스레드와 자원들을 연결하는 간선들의 환형고리가 나타난다.

**교착상태 헤결 방법**

`코프만 조건`은 논문에서 컴퓨터 시스템 내에서 교착상태를 유발할 수 있는 필요충분조건 4가지이다.

- Mutual Exclusion: 자원을 한 번에 한 스레드에게만 할당
- Hold & Wait: 스레드가 자원을 소유하면서 다른 자원대기
- No Preemption: 스레드 비선점
- Circular Wait: 환형고리 형성

- 이 4가지 조건이 모두 만족해야 교착상태가 발생한다는 것이다. -> 4가지 중 1가지라도 만족하지 않으면 교착상태 미발생

`교착상태 예방`은 코프만 조건 4가지 중 하나 이상의 조건이 성립되지 못하도록 미리 설계하고 구성해 예방하는 것

- 상호배제 없애기: 2개 이상의 스레드가 동시에 자원을 사용할 수 있도록 허용
- 스레드가 필요한 자원을 처음부터 가지게 하기 -> 스레드가 필요한 자원을 모두 할당받지 못하면 모든 자원이 준비될 때까지 아예 스레드의 실행 자체를 대기 or 스레드가 자원을 소유한 상태에서 새로운 자원이 필요하게 되면, 현재 소유한 자원을 모두 반환하는 것
- 자원의 선점 허용
- 모든 자원에 번호를 매기고, 스레드에게 반드시 번호 순으로 자원을 할당받게 함

`교착상태 회피`는 운영체제가 자원을 할당할 때 교착상태에 빠지지 않을 것이라고 확신하는 경우에만 자원 할당

- 자원을 할당할 때마다 교착상태 가능성을 검사하기 때문에 시스템 성능이 낮아짐
- banker's 알고리즘 -> 시스템을 안전/불안전 상태로 나누고 자원을 할당했을 때, 안전한 상태로 갈 때만 자원을 할당

`교착상태 감지 및 복구`는 교착상태를 감지하는 별도의 프로그램을 백그라운드로 구동

- 교착상태를 감지하는 작업이 주기적으로 실행되어야 하기때문에 성능이 낮아짐
- 자원 강제 선점
- 롤백
- 스레드 강제 종료

`교착상태 무시`는 아무런 대비책 없이 교착상태가 발생하도록 내버려 둠

- ostrich 알고리즘 -> 아무런 대책 없이 시스템을 재시작 하는 쉬운 방법 -> 데이터 손실 발생
- 교착상태는 웬만해서 발생하지 않으며, 만일 사용자나 관리자가 이상을 느끼면 의심 가는 스레드를 종료나 재부팅을 하는 대책을 세우면 된다는 생각이 기본으로 깔려있음

### 🗨️ 오늘의 회고

<!--
- 오늘의 학습 경험에 대한 자유로운 생각이나 느낀 점을 기록합니다.
- 성공적인 점, 개선해야 할 점, 새롭게 시도하고 싶은 방법 등을 포함할 수 있습니다.-->

- 기존에 배웠었던 것들을 하나하나 기억에서 끄집어내면서 공부하니까 좀 재밌는 것 같다 !!
