## 📆 2024-06-19

### 🔔 스크럼

- 학습 목표 1 : 영속성 컨텍스트

<br/>

### 🚀 Today I Learned

#### | 영속성 컨텍스트

`영속성 컨텍스트`란, JPA의 생명주기를 관리하는 저장소

- 애플리케이션이 데이터베이스와 상호작용할 때 사용되는 임시 데이터 저장 공간 -> 가상의 DB 역할
- EntityManagerFactory, EntityManager, EntityTransaction으로 영속성 컨텍스트에 접근, 저장/조회, 관리

#### EntityManagerFactory

`EntityManagerFactory`는 JPA에서 엔티티 매니저를 생성함

- 데이터베이스와 연결 설정
- 애플리케이션이 시작될 때 한 번 생성되고, 종료될 때까지 사용

#### EntityManager (엔티티 메니저)

`EntityManager`는 엔티티를 관리하는 역할

- 엔티티 매니저를 생성하여, 영속성 컨텍스트에 엔티티를 저장, 조회, 삭제 함

  `EntityManager entityManager = factory.createEntityManager();`

- persist:  
  엔티티를 영속성 컨텍스트에 저장 -> 아직 데이터베이스에 저장되지 않은 새 엔티티 객체를 영속 상태로 만듬
- find:  
  주어진 기본 키로 데이터베이스에서 엔티티를 조회
- merge:  
  분리된(detached) 엔티티의 상태를 영속성 컨텍스트에 병합
- remove:  
  영속성 컨텍스트에서 엔티티 제거, 데이터베이스에서 삭제
- flush:  
  영속성 컨텍스트의 변경 내용을 데이터베이스에 즉시 반영
- clear:  
  영속성 컨텍스트 비움 -> 관리되는 모든 엔티티는 분리된(detached) 상태가 됨
- close:  
  엔티티 매니저를 닫음

#### 엔티티의 생명주기

엔티티는 엔티티 매니저를 통해 영속성 컨텍스트에 저장이 디나, 실제 DB가 아니기 때문에 생명주기를 갖음

- 비영속 상태(New):  
  생성된 엔티티가 아직 영속성 컨텍스트에 저장되지 않은 상태
- 영속 상태(Managed):  
  생성된 엔티티가 영속성 컨텍스트에 저장
- 준영속 상태(Detached):  
  영속성 컨텍스트에 저장됐다가 분리된 상태
- 삭제 상태(Removed):  
  영속성 컨텍스트와 DB에서 삭제가 된 상태

#### 영속성 컨텍스트 장점

- 1차 캐시
- 동일성 보장
- 쓰기 지연
- 변경 감지
- 지연 로딩
- 더티 체킹

<br/>

### 🔥 오늘의 도전 과제와 해결 방법

- 영속성 컨텍스트 장점에 대해서 더 공부하기

<br/>

### 🗨️ 오늘의 회고

<!--
- 오늘의 학습 경험에 대한 자유로운 생각이나 느낀 점을 기록합니다.
- 성공적인 점, 개선해야 할 점, 새롭게 시도하고 싶은 방법 등을 포함할 수 있습니다.-->

- DB대신 따로 하나를 더 둔 후에 엔티티를 저장하고 다루는 것이 비효율적이라고 생각했는데, 공부해보니 훨씬 효율적이라고 생각이 바뀌었다....!
- 나중에 프로젝트에 적용해보고 싶다.
