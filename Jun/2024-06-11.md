## ğŸ“† 2024-06-11

### ğŸ”” ìŠ¤í¬ëŸ¼

- í•™ìŠµ ëª©í‘œ 1 : ìŠ¤í”„ë§ ë¶€íŠ¸ Querydsl

<br/>

### ğŸš€ Today I Learned

#### | ìŠ¤í”„ë§ ë¶€íŠ¸ Querydsl

`QueryDSL` ì€ ì •ì  íƒ€ì…ì„ ì´ìš©í•´ SQLê³¼ ê°™ì€ ì¿¼ë¦¬ë¥¼ ìƒì„±í•  ìˆ˜ ìˆê²Œ í•œë‹¤.
- ë™ì  ì¿¼ë¦¬ë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

#### Querydsl ì›ì¹™
- íƒ€ì… ì•ˆì •ì„±  
  ë„ë©”ì¸ì˜ í”„ë¡œí¼í‹°ë¥¼ ë°˜ì˜í•´ì„œ ìƒì„±í•œ ì¿¼ë¦¬ íƒ€ì…ì„ ì´ìš©í•´ ì¿¼ë¦¬ ì‘ì„±
- ì¼ê´€ì„±  
  ê¸°ë°˜ ê¸°ìˆ ì— ìƒê´€ì—†ì´ ì¿¼ë¦¬ ê²½ë¡œê°€ ë™ì¼
- ì¬ì‚¬ìš©  
  ëª¨ë“  ì¿¼ë¦¬ ì¸ìŠ¤í„´ìŠ¤ëŠ” ì—¬ëŸ¬ì°¨ë¡€ ì¬ì‚¬ìš© ê°€ëŠ¥


#### Querydsl ì ìš©í•˜ê¸°

build.gradle dependencies ì¶”ê°€

```
dependencies {
  implementation 'com.querydsl:querydsl-core:{QueryDSL ë²„ì „}'
  implementation 'com.querydsl:querydsl-jpa:{QueryDSL ë²„ì „}'
}
```


#### Querydsl ì‚¬ìš©í•˜ê¸°

`Querydsl config ì„¤ì •í•˜ê¸°`

```
import com.querydsl.jpa.impl.JPAQueryFactory;
import jakarta.persistence.EntityManager;
import lombok.RequiredArgsConstructor;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
@RequiredArgsConstructor
public class QueryDSLConfig {
  private final EntityManager entityManager;

  @Bean
  public JPAQueryFactory jpaQueryFactory() {
    return new JPAQueryFactory(entityManager);
  }
}
```

```
Repository
@RequiredArgsConstructor
public class CommentRepositoryImpl implements CustomCommentRepository {

  private final JPAQueryFactory queryFactory;

  @Override
  public List<Comment> findAllByPostId(Long postId) {
    return queryFactory.selectFrom(comment1)
        .where(post.id.eq(postId))
        .fetch();
  }
}
```

- selectFrom()  
  ì¿¼ë¦¬ì˜ ì‹œì‘ì , ì–´ë–¤ ì—”í‹°í‹°ë¥¼ ì¡°íšŒí• ì§€ ì§€ì •
- where()  
  ì¿¼ë¦¬ì— ì¡°ê±´ì„ ì¶”ê°€í•  ë•Œ ì‚¬ìš©, ì£¼ì–´ì§„ ì¡°ê±´ì— ë”°ë¼ ê²°ê³¼ë¥¼ í•„í„°ë§  
  íŠ¹ì • í•„ë“œê°€ íŠ¹ì • ê°’ê³¼ ê°™ì€ì§€ ì—¬ë¶€ í™•ì¸ ê°€ëŠ¥
- join()  
  ë‹¤ë¥¸ ì—”í‹°í‹°ì™€ ì¡°ì¸í•  ë•Œ ì‚¬ìš©  
  ê´€ê³„ ë§¤í•‘ì´ ìˆëŠ” ì—”í‹°í‹° ê°„ ì¡°ì¸ ìˆ˜í–‰ ê°€ëŠ¥  
  on() ë©”ì†Œë“œë¥¼ í˜¸í’€í•˜ì—¬ ì¡°ì¸ ì¡°ê±´ì„ ì§€ì •í•  ìˆ˜ ìˆìŒ
- orderBy()  
  ì¿¼ë¦¬ ê²°ê³¼ë¥¼ ì •ë ¬í•  ë•Œ ì‚¬ìš©  
  ì£¼ë¡œ ì •ë ¬í•  í•„ë“œë¥¼ asc, descë¡œ ì •ë ¬
- fetch()  
  ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê³  ê²°ê³¼ë¥¼ ê°€ì ¸ì˜´
  ê²°ê³¼ëŠ” ì£¼ë¡œ ë¦¬ìŠ¤íŠ¸ë‚˜ ë‹¨ì¼ ì—”í‹°í‹°ë¡œ ë°˜í™˜
  ë§Œì•½ ê²°ê³¼ê°€ ì—†ì„ ì‹œ ë¹ˆ ë¦¬ìŠ¤íŠ¸ë‚˜ nullì„ ë°˜í™˜


#### Querydsl ì¥ë‹¨ì 

`ì¥ì `
- ì»´íŒŒì¼ ì‹œì ì— ì¿¼ë¦¬ì˜ íƒ€ì… ì²´í¬ ê°€ëŠ¥  
  ëŸ°íƒ€ì„ì— ë°œìƒí•  ìˆ˜ ìˆëŠ” ì´ìŠˆë¥¼ ë¯¸ë¦¬ ë°©ì§€, ì¿¼ë¦¬ ì˜¤ë¥˜ ì¤„ì„
- ìë°” ì½”ë“œë¥¼ í†µí•´ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ê¸° ë•Œë¬¸ì— ì½”ë“œì˜ ê°€ë…ì„±ì´ ì¢‹ìŒ
- ì¡°ê±´ì ˆì„ ë©”ì„œë“œë¡œ ë¶„ë¦¬ -> ì¿¼ë¦¬ ë¡œì§ì˜ ì¬ì‚¬ìš© ê°€ëŠ¥
- ë™ì  ì¿¼ë¦¬ ì‘ì„±

`ë‹¨ì `
- Qí´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ”ë°, ì´ˆê¸° ì„¤ì •ê³¼ ìœ ì§€ ë³´ìˆ˜ê°€ í•„ìš”í•¨


<br/>

### ğŸ”¥ ì˜¤ëŠ˜ì˜ ë„ì „ ê³¼ì œì™€ í•´ê²° ë°©ë²•
- spring bootì— Querydsl ì ìš©í•˜ê¸°

<br/>

### ğŸ—¨ï¸ ì˜¤ëŠ˜ì˜ íšŒê³ 

<!--
- ì˜¤ëŠ˜ì˜ í•™ìŠµ ê²½í—˜ì— ëŒ€í•œ ììœ ë¡œìš´ ìƒê°ì´ë‚˜ ëŠë‚€ ì ì„ ê¸°ë¡í•©ë‹ˆë‹¤.
- ì„±ê³µì ì¸ ì , ê°œì„ í•´ì•¼ í•  ì , ìƒˆë¡­ê²Œ ì‹œë„í•˜ê³  ì‹¶ì€ ë°©ë²• ë“±ì„ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.-->

- ì´ì „ì— ìŠ¤í”„ë§ë¶€íŠ¸ ê³µë¶€ë¥¼ ì ê¹ í–ˆì—ˆì„ë•Œ Querydsl ì„¤ì •ì— ì• ë¥¼ ë¨¹ì—ˆì—ˆëŠ”ë° ìš”ë²ˆì—ëŠ” ì¡°ê¸ˆ ìˆ˜ì›”í•˜ê²Œ í•œ ê²ƒê°™ì€ ëŠë‚Œ
- Querydslì„ ì‚¬ìš©í•˜ë©´ ì¢€ ë” ë™ì ìœ¼ë¡œ ì¿¼ë¦¬ë¥¼ ë‚ ë¦´ ìˆ˜ ìˆëŠ” ì ì´ ì¢‹ì€ ê²ƒ ê°™ë‹¤.
