## ğŸ“† 2024-06-07

### ğŸ”” ìŠ¤í¬ëŸ¼

- í•™ìŠµ ëª©í‘œ 1 : ìŠ¤í”„ë§ ë¶€íŠ¸ JpaRepository

<br/>

### ğŸš€ Today I Learned

#### | ìŠ¤í”„ë§ ë¶€íŠ¸ JpaRepository

`JpaRepository` ì€ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•˜ê³  ì¡°ì‘í•˜ê¸° ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•˜ë©°, CRUD ì‘ì—…ì„ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤.

ì´ ì¤‘ì—ì„œ `CrudRepository`ëŠ” ì—”í‹°í‹° í´ë˜ìŠ¤ì— ëŒ€í•œ ì •êµí•œ CRUD ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.

#### ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œ JpaRepository ì ìš©í•˜ê¸°

build.gradle dependencies ì¶”ê°€

```
implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
```


#### JpaRepository ì‚¬ìš©í•˜ê¸°

```
public interface CrudRepository<T, ID> extends Repository<T, ID> {

  <S extends T> S save(S entity);

  Optional<T> findById(ID primaryKey);

  Iterable<T> findAll();

  long count();

  void delete(T entity);

  boolean existsById(ID primaryKey);

  // â€¦ more functionality omitted.
}
```

- save
  ì§€ì •ëœ ì—”í‹°í‹° ì €ì¥
- findById
  ì§€ì •ëœ IDë¡œ ì‹ë³„ë˜ëŠ” ì—”í‹°í‹° ë°˜í™˜
- findAll
  ëª¨ë“  ì—”í‹°í‹°ë¥¼ ë°˜í™˜
- count
  ì—”í‹°í‹° ìˆ˜ë¥¼ ë°˜í™˜
- delete
  ì§€ì •ëœ ì—”í‹°í‹° ì‚­ì œ
- existById
  ì§€ì •ëœ IDë¥¼ ê°€ì§„ ì—”í‹°í‹°ê°€ ì¡´ì¬í•˜ëŠ”ì§€ ì—¬ë¶€ë¥¼ ë‚˜íƒ€ëƒ„


ì˜ˆì‹œ )

```
interface UserRepository extends CrudRepository<User, Long> {
  long countByLastname(String lastname);
}
```
í•´ë‹¹ ì¿¼ë¦¬ëŠ” UseRepositoryê°€ CrudRepositoryë¥¼ í™•ì¥í–ˆìœ¼ë©° countByLastnameì„ í†µí•´ì„œ ì£¼ì–´ì§„ lastnameì„ ê°€ì§„ ì—”í‹°í‹° ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” ì¿¼ë¦¬ì´ë‹¤.


#### JpaRepository ì¿¼ë¦¬ ë°©ë²•

JPA ëª¨ë“ˆì€ ì¿¼ë¦¬ë¥¼ ë¬¸ìì—´ë¡œ ìˆ˜ë™ìœ¼ë¡œ ì •ì˜í•˜ê±°ë‚˜ ë©”ì„œë“œ ì´ë¦„ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.  
<a href="https://docs.spring.io/spring-data/jpa/reference/jpa/query-methods.html">ìŠ¤í”„ë§ ë¶€íŠ¸ Jpa ê³µì‹ë¬¸ì„œ</a>


ì§€ê¸ˆë¶€í„° ê³µì‹ ë¬¸ì„œì— ì í˜€ì ¸ ìˆëŠ” Jpq ì¿¼ë¦¬ ê¸°ë³¸ì ì¸ ì‘ì„± ë°©ë²• ëª‡ ê°€ì§€ë¥¼ ì•Œì•„ë³´ë„ë¡ í•˜ì.

- Jpa í‚¤ì›Œë“œ
  |í‚¤ì›Œë“œ|ì˜ˆì‹œ|JPQL|
  |---|---|---|
  |`Distinct`|`findDistinctByLastnameAndFirstname`|`select distinct â€¦â€‹ where x.lastname = ?1 and x.firstname = ?2`|
  |`And`|`findByLastnameAndFirstname`|`â€¦ where x.lastname = ?1 and x.firstname = ?2`|
  |`Or`|`findByLastnameOrFirstname`|`â€¦ where x.lastname = ?1 or x.firstname = ?2`|
  |`Is`, `Equals`|`findByFirstnameIs`, `findByFirstnameEquals`|`â€¦ where x.firstname = ?1`|
  |`Like`|`findByFirstnameLike`|`â€¦ where x.firstname like ?1`|
  |`OrderBy`|`findByAgeOrderByLastnameDesc`|`â€¦ where x.age = ?1 order by x.lastname desc`|



<br/>

### ğŸ”¥ ì˜¤ëŠ˜ì˜ ë„ì „ ê³¼ì œì™€ í•´ê²° ë°©ë²•

- spring bootì— Jpa repository ì ìš©í•˜ê¸°

<br/>

### ğŸ—¨ï¸ ì˜¤ëŠ˜ì˜ íšŒê³ 

<!--
- ì˜¤ëŠ˜ì˜ í•™ìŠµ ê²½í—˜ì— ëŒ€í•œ ììœ ë¡œìš´ ìƒê°ì´ë‚˜ ëŠë‚€ ì ì„ ê¸°ë¡í•©ë‹ˆë‹¤.
- ì„±ê³µì ì¸ ì , ê°œì„ í•´ì•¼ í•  ì , ìƒˆë¡­ê²Œ ì‹œë„í•˜ê³  ì‹¶ì€ ë°©ë²• ë“±ì„ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.-->

- ê¸°ì¡´ì— jdbc templateì„ í†µí•´ì„œ í–ˆë˜ ê²ƒë³´ë‹¤ í›¨ì”¬ ë” ì§ê´€ì ì´ê³  ì‚¬ìš©í•˜ê¸° í¸í•˜ë‹¤ëŠ” ëŠë‚Œì´ ë“¤ì—ˆë‹¤.
- í•˜ì§€ë§Œ ê³µì‹ë¬¸ì„œë¥¼ ë³´ë‹ˆ ê³µë¶€í•´ì•¼ í•˜ëŠ” ì–‘ì´ ì—„ì²­ë‚œ ê²ƒì„ ì•Œê²Œ ë˜ì—ˆê³ ... ì—­ì‹œ ì‰¬ìš´ê±´ ì—†êµ¬ë‚˜ ë¼ëŠ” ìƒê°ì´ ë“œëŠ” ë‚ ì´ì—ˆë‹¤...
