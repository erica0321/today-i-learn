## 📆 2024-06-03

### 🔔 스크럼

- 학습 목표 1 : 트랜잭션 격리 수준
  <br/>

### 🚀 Today I Learned

#### | 트랜잭션

`트랜잭션`이란, 데이터베이스의 상태를 변화시키기 위해 수행하는 작업 단위이다.

#### 트랜잭션 특성 (ACID)

- `원자성`  
  트랜잭션은 더 이상 분해가 불가능한 업무의 최소단위, 전부 처리되거나 전부 처리되지 않아야 한다는 특성
- `일관성`  
  일관된 데이터베이스에서 어떠한 트랜잭션이 성공적으로 commit되면 그 데이터베이스는 여전히 일관된다는 특성
- `격리성`  
  실행 중인 트랜잭션의 중간 결과를 다른 트랜잭션이 접근할 수 없다는 특성
- `영속성`  
  트랜잭션이 성공적으로 커밋되면, 그 결과는 데이터베이스에 영속적으로 저장된다는 특성

<br/>

#### | 트랜잭션 격리성
`트랜잭션 격리성`이란, 위에서 말했듯이 실행 중인 트랜잭션의 중간 결과를 다른 트랜잭션이 접근할 수 없다는 특성이다.
이러한 트랜잭션의 격리성으로 인해 여러가지 문제가 발생한다.

격리성으로 인해 발생할 수 있는 문제점은 3가지이다.

- `Dirty Read`  
  다른 트랜잭션에 의해 수정됐으나 아직 커밋되지 않은 데이터를 읽는 것
- `Non-Repeatable Read`  
  한 트랜잭션 내에서 같은 Key를 가진 행을 두 번 읽었으나 그 중간에 값이 변경되거나 삭제되어 결과가 다르게 나타나는 것
- `Phantom Read`  
  한 트랜잭션 내에서 같은 쿼리를 두번 수행했는데, 처음 쿼리에 없던 레코드가 두 번째 쿼리에서 나타나는 것

<br/>

#### | 트랜잭션 격리성 수준

`트랜잭션 격리성 수준`이란, 여러 트랜잭션이 동시에 처리될 때, 특정 트랜잭션이 다른 트랜잭션에서 변경하거나 조회하는 데이터를 볼 수 있게 허용 가능 여부를 결정하는 것이다.

지정할 수 있는 격리성 수준은 4가지이다.

- `Read Uncommitted`  
  트랜잭션에서 처리 중이나 커밋되지는 않은 데이터를 다른 트랜잭션이 읽는 것을 허용
- `Read Committed`  
  트랜잭션이 커밋되어 확정된 데이터만 다른 트랜잭션이 읽도록 허용, 커밋되지 않은 데이터는 Undo 로그의 이전 데이터를 읽음
- `Repeatable Read`  
  트랜잭션 내에서 삭제, 변경은 Undo 로그에 넣고, 앞서 발생한 트랜잭션에 대해서는 실제 데이터가 아닌 Undo 로그에 있는 데이터를 읽음
- `Serializable`  
  트랜잭션 내에서 쿼리를 두 번 이상 수행할 때, 값이 달라지는 것을 막도록 하는 설정

  
  |                  | Dirty Read | Non-Repeatable Read | Phantom Read |
  | ---------------- | ---------- | ------------------- | ------------ |
  | Read Uncommitted | O          | O                   | O            |
  | Read Committed   | X          | O                   | O            |
  | Repeatable Read  | X          | X                   | X            |
  | Serializable     | X          | X                   | X            |

  <br/>
  
  **SQL에서 트랜잭션 격리성 설정하기**
  
  ```
  SET TRANSACTION ISOLATION LEVEL
      { READ UNCOMMITTED
      | READ COMMITTED
      | REPEATABLE READ
      | SERIALIZABLE
      }
  ```

### 🔥 오늘의 도전 과제와 해결 방법

- 커뮤니티 프로젝트 서버에 트랜잭션 격리성 설정하기

### 🗨️ 오늘의 회고

<!--
- 오늘의 학습 경험에 대한 자유로운 생각이나 느낀 점을 기록합니다.
- 성공적인 점, 개선해야 할 점, 새롭게 시도하고 싶은 방법 등을 포함할 수 있습니다.-->

- 트랜잭션의 특징인 격리성을 통해서 예상치 못한 현상이 발생한다는 것을 알았고, 이를 조절하지 않는다면 예기치 못한 에러나 정확하지 않은 정보를 전달할 수 있다는 점을 알게 되었다.
- 트랜잭션을 사용할 때에는 격리성 수준을 고려하여 코딩을 해야겠다고 느꼈다.
